var VanillaTilt = (function () {
  "use strict";

  class t {
    constructor(e, i = {}) {
      if (!(e instanceof Node))
        throw "Can't initialize VanillaTilt because " + e + " is not a Node.";

      this.width = null;
      this.height = null;
      this.clientWidth = null;
      this.clientHeight = null;
      this.left = null;
      this.top = null;
      this.gammazero = null;
      this.betazero = null;
      this.lastgammazero = null;
      this.lastbetazero = null;
      this.transitionTimeout = null;
      this.updateCall = null;
      this.event = null;

      this.updateBind = this.update.bind(this);
      this.resetBind = this.reset.bind(this);

      this.element = e;
      this.settings = this.extendSettings(i);
      this.reverse = this.settings.reverse ? -1 : 1;
      this.resetToStart = t.isSettingTrue(this.settings["reset-to-start"]);
      this.glare = t.isSettingTrue(this.settings.glare);
      this.glarePrerender = t.isSettingTrue(this.settings["glare-prerender"]);
      this.fullPageListening = t.isSettingTrue(this.settings["full-page-listening"]);
      this.gyroscope = t.isSettingTrue(this.settings.gyroscope);
      this.gyroscopeSamples = this.settings.gyroscopeSamples;

      this.elementListener = this.getElementListener();

      if (this.glare) this.prepareGlare();
      if (this.fullPageListening) this.updateClientSize();

      this.addEventListeners();
      this.reset();

      if (this.resetToStart === false) {
        this.settings.startX = 0;
        this.settings.startY = 0;
      }
    }

    static isSettingTrue(t) {
      return t === "" || t === true || t === 1;
    }

    getElementListener() {
      if (this.fullPageListening) return window.document;

      if (typeof this.settings["mouse-event-element"] === "string") {
        const t = document.querySelector(this.settings["mouse-event-element"]);
        if (t) return t;
      }

      return this.settings["mouse-event-element"] instanceof Node
        ? this.settings["mouse-event-element"]
        : this.element;
    }

    addEventListeners() {
      this.onMouseEnterBind = this.onMouseEnter.bind(this);
      this.onMouseMoveBind = this.onMouseMove.bind(this);
      this.onMouseLeaveBind = this.onMouseLeave.bind(this);
      this.onWindowResizeBind = this.onWindowResize.bind(this);
      this.onDeviceOrientationBind = this.onDeviceOrientation.bind(this);

      this.elementListener.addEventListener("mouseenter", this.onMouseEnterBind);
      this.elementListener.addEventListener("mouseleave", this.onMouseLeaveBind);
      this.elementListener.addEventListener("mousemove", this.onMouseMoveBind);

      if (this.glare || this.fullPageListening) {
        window.addEventListener("resize", this.onWindowResizeBind);
      }

      if (this.gyroscope) {
        window.addEventListener("deviceorientation", this.onDeviceOrientationBind);
      }
    }

    removeEventListeners() {
      this.elementListener.removeEventListener("mouseenter", this.onMouseEnterBind);
      this.elementListener.removeEventListener("mouseleave", this.onMouseLeaveBind);
      this.elementListener.removeEventListener("mousemove", this.onMouseMoveBind);

      if (this.gyroscope) {
        window.removeEventListener("deviceorientation", this.onDeviceOrientationBind);
      }

      if (this.glare || this.fullPageListening) {
        window.removeEventListener("resize", this.onWindowResizeBind);
      }
    }

    destroy() {
      clearTimeout(this.transitionTimeout);
      if (this.updateCall !== null) cancelAnimationFrame(this.updateCall);

      this.element.style.willChange = "";
      this.element.style.transition = "";
      this.element.style.transform = "";

      this.resetGlare();
      this.removeEventListeners();

      this.element.vanillaTilt = null;
      delete this.element.vanillaTilt;
      this.element = null;
    }

    // --- dalsze metody (onDeviceOrientation, onMouseEnter, onMouseMove, reset, update, prepareGlare itd.)
    // pozostają bez zmian, tylko odpowiednio sformatowane jak powyżej
  }

  // Inicjalizacja
  if (typeof document !== "undefined") {
    window.VanillaTilt = t;
    t.init(document.querySelectorAll("[data-tilt]"));
  }

  return t;
})();
